<!DOCTYPE html><html lang="zh-CN"><head><meta name="generator" content="Hexo 3.9.0"><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="keywords" content="青花@Blue_And_White, 青花@Blue_And_White"><meta name="author" content="青花@Blue_And_White"><meta name="description" content="kali工具入门4-Namp的使用（上）"><meta name="copyright" content="青花@Blue_And_White"><title>kali工具入门4-Namp的使用（上） | 青花@Blue_And_White</title><meta name="format-detection" content="telephone=no"><meta http-equiv="x-dns-prefetch-control" content="on"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css"><link rel="stylesheet" href="/css/index.css?v=1.0.2"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.png?v=1.0.2"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon.png?v=1.0.2"><script>let CONFIG = {
  back2top_animation: true,
  sidebar_offsetTop: '20px'
};
window.CONFIG = CONFIG;</script></head><body><div id="container"><header id="header" style="background-image: url(https://www.evil-qinghua.top/wp-content/xingkong1-1-1024x357.png)"><nav class="header-nav"><div class="header-nav-inner"><div class="header-nav-menu-icon fa fa-bars"></div><div class="header-nav-search"><i class="fa fa-search"></i><span>搜索</span></div><div class="header-nav-menu"><span><a href="/"><i class="fa fa-home"></i>首页</a></span><span><a href="/archives/"><i class="fa fa-folder-open"></i>归档</a></span><span><a href="/categories/"><i class="fa fa-th"></i>分类</a></span><span><a href="/tags/"><i class="fa fa-tags"></i>标签</a></span><span><a href="/friend/"><i class="fa fa-handshake-o"></i>nav.友情链接</a></span></div></div></nav><div class="header-info"><div class="header-info-inner"><div class="site-info-title">青花@Blue_And_White</div><div class="site-info-subtitle">一个网络安全实践者</div></div></div></header><main id="main"><div class="main-inner"><aside id="sidebar"><div class="sidebar-inner"><div class="sidebar-nav"><span class="sidebar-nav-toc current">文章目录</span><span class="sidebar-nav-overview">站点概览</span></div><section class="sidebar-toc"><div><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#kali工具入门4-Namp的使用（上）"><span class="toc-number">1.</span> <span class="toc-text">kali工具入门4-Namp的使用（上）</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#前情提要"><span class="toc-number">1.1.</span> <span class="toc-text">前情提要</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Nmap的基本语法"><span class="toc-number">1.2.</span> <span class="toc-text">Nmap的基本语法</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#主机扫描"><span class="toc-number">1.3.</span> <span class="toc-text">主机扫描</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#端口状态"><span class="toc-number">1.4.</span> <span class="toc-text">端口状态</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#端口扫描"><span class="toc-number">1.5.</span> <span class="toc-text">端口扫描</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#小节"><span class="toc-number">1.6.</span> <span class="toc-text">小节</span></a></li></ol></li></ol></div></section><section class="hide sidebar-overview"><div class="sidebar-author"><img class="sidebar-author-avatar" src="/images/avatar.png" alt="avatar"><p class="sidebar-author-motto">士不可以不弘毅，任重而道远</p></div><div class="sidebar-social"><span class="sidebar-social-item"><a href="https://github.com/Blue-And-White" target="_blank" title="github → https://github.com/Blue-And-White"><i class="fa fa-github"></i></a></span><span class="sidebar-social-item"><a href="tencent://QQInterLive/?Cmd=2&amp;Uin=597151269" target="_blank" title="qq → tencent://QQInterLive/?Cmd=2&amp;Uin=597151269"><i class="fa fa-qq"></i></a></span><span class="sidebar-social-item"><a href="mailto:blueandwhite@yeah.net" target="_blank" title="mail → mailto:blueandwhite@yeah.net"><i class="fa fa-envelope-o"></i></a></span></div><div class="sidebar-state"><div class="sidebar-state-item sidebar-state-posts"><a href="/archives/"><div class="sidebar-state-item-count">16</div><div class="sidebar-state-item-name">文章</div></a></div><div class="sidebar-state-item sidebar-state-categories"><a href="/categories/"><div class="sidebar-state-item-count">10</div><div class="sidebar-state-item-name">分类</div></a></div><div class="sidebar-state-item sidebar-state-tags"><a href="/tags/"><div class="sidebar-state-item-count">20</div><div class="sidebar-state-item-name">标签</div></a></div></div><div class="sidebar-cc"><a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank"><img src="/images/cc-by-nc-sa.svg" alt="creative commons"></a></div></section><div class="sidebar-progress"><div class="sidebar-progress-read"><span>你已阅读了</span><span class="sidebar-progress-number"></span></div><div class="sidebar-progress-line"></div></div></div></aside><div class="main-content code-highlight"><div class="post-header"><h1 class="post-title">kali工具入门4-Namp的使用（上）</h1><div class="post-meta"><span class="post-meta-create"><i class="fa fa-calendar-o"></i><span>发表于 </span><span>2018-12-17</span></span><span class="post-meta-update"><i class="fa fa-calendar-check-o"></i><span>更新于 </span><span>2019-07-10</span></span><span class="post-meta-reading-count"><i class="fa fa-eye"></i><span>阅读次数 </span><span id="busuanzi_value_page_pv"></span></span></div></div><div class="post-body"><p>kali工具入门4-Namp的使用</p>
<h1 id="kali工具入门4-Namp的使用（上）"><a href="#kali工具入门4-Namp的使用（上）" class="headerlink" title="kali工具入门4-Namp的使用（上）"></a>kali工具入门4-Namp的使用（上）</h1><h2 id="前情提要"><a href="#前情提要" class="headerlink" title="前情提要"></a>前情提要</h2><p> 前面我们说到了wireshark的简单使用，在渗透测试或者我们在进行漏洞挖掘的时候常常会用到nmap来进行端口探测，信息收集等等。这个也是我们必不可少的一款神器。那么本节我们就来介绍一下NAMP的使用，除此之外呢，这个工具比较流行，我们就尽量说的细一点。慢慢的探索。</p>
<p> –青花</p>
<h2 id="Nmap的基本语法"><a href="#Nmap的基本语法" class="headerlink" title="Nmap的基本语法"></a>Nmap的基本语法</h2><p>我们Nmap的基本常规扫描是</p>
<p>Nmap 选项 ip或者主机，这里我们要注意的事Nmap默认扫描的是1000个常用端口哦，如果想要扫描其他的我们需要另外指定。</p>
<p><img src="http://139.224.115.186/images/1540604671323.png" alt="1540604671323"></p>
<p>比如说我们Nmap -A baidu.com（-A 的意思是综合扫描）</p>
<p>我们扫描百度</p>
<p><img src="http://139.224.115.186/images/1540604796544.png" alt="1540604796544"></p>
<p>我们看到这里扫描出了百度开放的一些端口信息以及主机信息。</p>
<p>我们可以扫描一个网段。</p>
<p><img src="http://139.224.115.186/images/1540604840517.png" alt="1540604840517"></p>
<p>这里我们扫描结束之后我们看到这里已经扫描完成了，不过没有结果。因为这个网段里面没有主机。</p>
<p>接下来我们继续向下测试</p>
<p>那么我们扫描一个网段中，我们已知有一台主机存在，但是我们已经了解了它的信息，我们不想扫描它。我们可以用</p>
<p>–exclude</p>
<p>我们kali的虚拟机地址为192.168.242.129 我们扫描C段。想扫描其他开放主机的信息，但是这个kali我不想扫，我们应该怎么做呢？</p>
<p><img src="http://139.224.115.186/images/1540605973462.png" alt="1540383792535"></p>
<p>我们不扫描129.</p>
<h2 id="主机扫描"><a href="#主机扫描" class="headerlink" title="主机扫描"></a>主机扫描</h2><p>另外在渗透测试中，我们常常要用到扫描一些C段之类的东西，比如说我们需要发现C段内的一些主机。这时候我们就要利用主机发现的命令去发现主机。</p>
<p>这里我们来说明一下一些基本的命令</p>
<pre><code>NMAP

-sP   ping 扫描
-PO   无ping扫描
-PS   TCP+SYN ping 扫描
-PA      TCP+ACK Ping 扫描
-PU   UDP  ping扫描
-PY      SCTP ping扫描
-n    禁止DNS反向解析
PR      ARP ping扫描
--reason　显示端口处于带状态的原因
-F  快速扫描</code></pre><p><img src="http://139.224.115.186/images/1540605158325.png" alt="1540467543839"></p>
<p>比如说我们这里扫描，这里没有发现主机。</p>
<h2 id="端口状态"><a href="#端口状态" class="headerlink" title="端口状态"></a>端口状态</h2><p>这里面我们看到这里有state这么一栏，这里是说明了端口状态我们来介绍一下。</p>
<p>OPEN 表示端口开放状态</p>
<p>Closed 表示端口关闭状态</p>
<p>Filtered 表示数据包到达了，但是没有返回，但是被墙了或者过滤了</p>
<p>UnFiltered 表示数据包没有到达，不能知晓主机状态</p>
<p>Open|filtered 这个无法识别端口是开放还是Filtered状态，常常出现在，udp，ip protocol ，TCP null，fin，和xmas扫描中。</p>
<p>Closed|filtered 这种状态主要出现在nmap无法区分端口处于closed还是filtered时。此状态只会出现在IP ID idle scan扫描中。</p>
<h2 id="端口扫描"><a href="#端口扫描" class="headerlink" title="端口扫描"></a>端口扫描</h2><p>在进行渗透测试的过程中，我们常常要探测目标主机开放端口，已确定运行其上面的一些服务，以便我们利用。</p>
<p>至于常见端口啥的我就不一一的说了，这个我们自己去了解了。</p>
<p>什么Mysql3306啊，远程桌面3389的，http80啊。</p>
<p>老生常谈，说说参数。</p>
<pre><code>-sS     SYN扫描，秘密扫描的一种，不会被记录，基于三次握手但是不建立最后的连接，需要root权限
-sU        使用UDP扫描
-sP        对端口进行icmp扫描，说白了Ping扫描
-sT        TCP扫描，基于TCP三次握手的扫描，速度快，也比较准就是容易被拦下来或者被墙
-sA        ACK扫描
-sN        TCP头什么都不设置
-sF        只设置TCP的FIN标志位，跟sS效果差不多，但是比它快
-sX        Xmas扫描
--scanflags  自定义TCP扫描包
-p         指定端口
-sI        idle扫描，僵尸主机扫描</code></pre><p>前面的几项鉴于也没有什么特殊性，我就不详细的说明了，对于下面的我查了查资料，也说说自己的理解。</p>
<p>我们先来举一个-sS的例子，这个是什么原理呢，我们看张图</p>
<p><img src="http://139.224.115.186/images/1540605478757.png" alt="1540605478757"></p>
<p>这张图是我们-sT扫描的一次完整过程，那么sS是什么原理呢，这里我们看其实我们想要看一个端口开没开放，我们看在TCP三次握手（PS：这个我在上次wireshark的时候有说，忘了自行补课。）的过程中我们只需要前两步就可以完成了。</p>
<p>就是在ACK这里的时候，我们前面说过可能有洪范攻击。但是在三次握手的第二步中，我们就可以通过返回的内容判断是否开放端口了。这种不会建立连接，很隐蔽，也不会被系统日志记录下来。</p>
<p>比如这里我们用sS扫描出来的结果。</p>
<p><img src="http://139.224.115.186/images/1540606496317.png" alt="1540606496317"></p>
<p>sN sF sX</p>
<p>这三个探测都比较隐蔽，比syn还要隐蔽，他们设置的标志位是不同的，但是也都能够起到扫描的效果。</p>
<p>这里我们就来拿sF来举个栗子。</p>
<p>输入nmap -sF 然后指定主机扫描，这里就是把TCP的FIN标志位给只换了。FIN是表示连接关闭的一个标志位。</p>
<p><img src="http://139.224.115.186/images/1540606656590.png" alt="1540526618315"></p>
<p>这个其实主要作用在于判断是不是windows操作系统，其他的用处感觉并不大。因为我们用的并不多。</p>
<p>如果使用-sF、-sX或者-sN扫描显示所有的端口都是关闭的，而使用-sS（SYN）扫描显示有打开的端口，你可以确定目标主机可能运行的是Windwos系统。因为微软忽略了一些标准，所以呢来说这个对于探测windows还是有点用的。</p>
<p>-sI</p>
<p>接下来我们在介绍一下僵尸主机扫描</p>
<p>在进行扫描之前我们需要先去找一台僵尸主机</p>
<p>首先我们输入</p>
<p>nmap -p80 –script ipidseq -iR 后面加上主机数量</p>
<p><img src="http://139.224.115.186/images/1540606827087.png" alt="1540606827087"></p>
<p>很遗憾，这个需要运气成分，我们没有抓到一个开放的。</p>
<p><img src="http://139.224.115.186/images/1540606850903.png" alt="1540606850903"></p>
<p>再抓一次。</p>
<p>运气爆炸，抓到了</p>
<p>我们接下来就要进行扫描了。</p>
<p>然后我们输入语法</p>
<p>nmap -Pn -sI 这里是僵尸主机 这里是被扫描主机</p>
<p><img src="http://139.224.115.186/images/1540607157358.png" alt="1540607157358"></p>
<p>这里好像探测结果错了，这个僵尸主机用不了。简单的介绍一下，如果感兴趣的话，可以回去试试。</p>
<h2 id="小节"><a href="#小节" class="headerlink" title="小节"></a>小节</h2><p> 本节主要介绍了一下nmap的基本语法，还有主机发现，端口探测的简单说明，其次我们也说了一下某些原理，端口的状态，下节课我们将继续深入nmap的讲解。</p>
</div><footer class="post-footer"><div class="post-footer-end"><span>------</span><span>本文结束，感谢您的阅读</span><span>------</span></div><div class="post-footer-copyright"><div class="copyright-author"><span class="copyright-name">本文作者:</span><span class="copyright-value"><a href="http://yoursite.com">青花@Blue_And_White</a></span></div><div class="copyright-link"><span class="copyright-name">本文链接:</span><span class="copyright-value"><a href="http://yoursite.com/2018/12/17/kali-e5-b7-a5-e5-85-b7-e5-85-a5-e9-97-a84-namp-e7-9a-84-e4-bd-bf-e7-94-a8-ef-bc-88-e4-b8-8a-ef-bc-89/">http://yoursite.com/2018/12/17/kali-e5-b7-a5-e5-85-b7-e5-85-a5-e9-97-a84-namp-e7-9a-84-e4-bd-bf-e7-94-a8-ef-bc-88-e4-b8-8a-ef-bc-89/</a></span></div><div class="copyright-notice"><span class="copyright-name">版权声明:</span><span class="copyright-value">本博客所有文章除特别声明外，均采用  <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" rel="external nofollow" target="_blank">BY-NC-SA</a> 许可协议。转载请注明出处！</span></div></div><div class="post-footer-tags"><i class="fa fa-tags icon"></i><span><a href="http://yoursite.com/tags/网络探测/" title="网络探测">网络探测</a></span><span><a href="http://yoursite.com/tags/nmap/" title="nmap">nmap</a></span></div><nav id="paginator"><div class="post-paginator"><div class="article-prev pull-left"><a href="/2018/12/17/kali-e5-b7-a5-e5-85-b7-e5-85-a5-e9-97-a84-nmap-e7-9a-84-e4-bd-bf-e7-94-a8-ef-bc-88-e4-b8-ad-ef-bc-89/"><i class="fa fa-chevron-left"></i><span class="title">kali工具入门4-nmap的使用（中）</span></a></div><div class="article-next pull-right"><a href="/2018/12/17/kali-e5-b7-a5-e5-85-b7-e5-85-a5-e9-97-a8-3-wireshark-e7-9a-84-e4-bd-bf-e7-94-a8-ef-bc-88-e4-b8-8b-ef-bc-89/"><span class="title">kali工具入门-3 wireshark的使用（下）</span><i class="fa fa-chevron-right"></i></a></div></div></nav></footer></div></div></main><footer id="footer"><div class="footer-inner"><div><span>&copy; 2019</span><span class="fa fa-paper-plane heart-beat footer-separator" style="color: #ff0000"></span><span>青花@Blue_And_White.</span></div><div><span class="footer-powered">由 <a href="http://hexo.io/" title="hexo" target="_blank" rel="noopener">hexo</a> 强力驱动</span><span> v3.9.0.</span></div><div class="busuanzi"><script async src="https://cdn.jsdelivr.net/gh/sukkaw/busuanzi@2.3/bsz.pure.mini.js"></script><span class="busuanzi-uv"><i class="fa fa-user"></i><span>访问人数 </span><span id="busuanzi_value_site_uv"></span></span><span class="separator">|</span><span class="busuanzi-pv"><i class="fa fa-eye"></i><span>浏览总量 </span><span id="busuanzi_value_site_pv"></span></span></div></div></footer><div id="back-top"><div class="back-top-inner" title="回到顶部"><i class="fa fa-rocket"></i></div></div></div><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@latest/velocity.min.js"></script><script src="/js/utils.js?v=1.0.2"></script><script src="/js/scroll.js?v=1.0.2"></script><script src="/js/header.js?v=1.0.2"></script><script src="/js/sidebar.js?v=1.0.2"></script><script src="/js/post.js?v=1.0.2"></script></body></html>